<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Babylon.js sample code</title>

    <!--load BabylonJS-->
    <script src="js/babylon.max.js"></script>

    <!--proceedural textures are now a library-->
    <script src="js/babylon.marbleProceduralTexture.min.js"></script>
    <script src="js/babylon.brickProceduralTexture.min.js"></script>
    <script src="js/babylon.roadProceduralTexture.min.js"></script>
    <script src="js/babylon.grassProceduralTexture.min.js"></script>
    <script src="js/babylon.woodProceduralTexture.min.js"></script>

    <!--load Bootstrap styles-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">

    <!--local styles allowing fullscreen-->
    <link rel="stylesheet" href="css/styles.css">

</head>

<body>

    <!--
        webvr camera example with Babylon.js adapted from example by Raanan Weber
        @link https://blog.raananweber.com
    -->


    <span class="label" id="fpsLabel">60 fps</span>

    <p>
        <button type="button" id="toggleVr" class="btn btn-default btn-lg">Toggle WebVR</button>

        <button type="button" id="distortion" class="btn btn-default btn-lg">Toggle Distortion</button>
    </p>

    <button class="btn btn-default btn-lg" id="fullscreen">FS</button>

    <canvas id="renderCanvas"></canvas>

    <canvas id="dupCanvas"></canvas>

    <script src="js/main.js"></script>

    <script>

        // set up the Ui
        var canvas = document.getElementById("renderCanvas");
        var fs = document.getElementById("fullscreen");
        var fpsLabel = document.getElementById("fpsLabel");
        var engine = new BABYLON.Engine(canvas, true);
        
        var vrToggle = document.getElementById("toggleVr");
        var distortion = document.getElementById("distortion");

        var vr = false;
        var dist = true;

        var lowres = document.getElementById("lowres");
        var highres = document.getElementById("highres");
        var dupCanvas = document.getElementById("dupCanvas");
        
        // Create the scene (including cameras, objects)
        var scene = createScene();

        // Set our camera. vr toggles webvr, dist toggles barrel distortion.
        setCamera(vr, dist);

        // Create the rendering loop.
        engine.runRenderLoop(function () {

            scene.render();            
            
            // Show framerate.
            fpsLabel.innerHTML = engine.getFps().toFixed() + " fps";   
          
            // Animate an object

                  
                     
        });

        // Resize.
        window.addEventListener("resize", function () {
            engine.resize();
        });
        
        // Go to fullscreen.
        fs.addEventListener("click", function() {
            if(vr==true) {
                scene.activeCamera.requestVRFullscreen(false);
            } else {
                engine.switchFullscreen(false);
            }
        });
        
        /*lowres.addEventListener("click", function() {
            setRatio(2);
        });
        
        highres.addEventListener("click", function() {
            setRatio(0.5);
        }); */ 
        
        // Toggle WebVR.
        vrToggle.addEventListener("click", function() {
            vr = !vr;
            setCamera(vr, dist);
        });

        // Toggle Barrel distortion.   
        distortion.addEventListener("click", function() {
            dist = !dist;
            setCamera(vr, dist);
        });         
        
    </script>
</body>

</html>